try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="aaf296ac-656e-4957-a48b-e3207c4ba9a2",e._sentryDebugIdIdentifier="sentry-dbid-aaf296ac-656e-4957-a48b-e3207c4ba9a2")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:scheduling-links":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{3673:(e,r,t)=>{t.d(r,{u:()=>s});var a=t(35695);let s=()=>Object.fromEntries((0,a.useSearchParams)().entries())},9723:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(79889),s=t(16784),n=t.n(s),o=t(87358);let i=n()({level:"warn",messageKey:"message",errorKey:"error",mixin:()=>{let e=a.u.getActiveSpan(),r=e?.spanContext(),s=o.env.npm_package_version;return{service:"booking-app","logging.googleapis.com/labels":{"tenant-id":t.g.tenantId,version:s},"X-B3-TraceId":r?.traceId,"X-B3-SpanId":r?.spanId,...r}}})},10720:(e,r,t)=>{t.d(r,{U:()=>h,l:()=>p});var a=t(95155),s=t(76876),n=t(12115),o=t(87890),i=t(35695),d=t(59540),l=t(27186);let u=({children:e,schedulingBranding:r,isBrandingLoading:t})=>{let s=(0,i.useSearchParams)(),n=(0,i.usePathname)(),u=!s.has("domElement")&&s.has("trigger")&&!["RestAPI","RouterLink"].includes(s.get("trigger"))||"true"===s.get("concierge")||"true"===s.get("inModal")||"true"===s.get("inModal"),c=n.split("/").includes("personal-page"),g=t?"transparent":(0,d.m)({schedulingBranding:r,pathname:n});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.so,{"data-test-id":"PageLayoutContainer",flexDirection:"column",justifyContent:"space-between",w:"100%","data-id":"page-layout-container",h:u?"100%":"100vh",borderRadius:u?8:void 0,bg:u?"transparent":g,children:[(0,a.jsx)(o.so,{flexDirection:"column",borderRadius:"inherit",alignItems:"center",flex:1,overflow:"auto",children:e}),(0,a.jsx)(o.az,{width:"100%","data-id":"footer-container",children:r?.displayCPbranding&&!c&&(0,a.jsx)(l.F,{inModal:u})})]})})};u.displayName="PageLayoutContainer";var c=t(14693);let g=(0,n.createContext)(void 0),h=({children:e})=>{let{tenantId:r,workspaceId:t}=(0,c.$M)(),{data:o,isLoading:i,isPending:d}=(0,s.nz)({tenantId:r,workspaceId:t}),l=(0,n.useMemo)(()=>({brandingOptions:d?void 0:o}),[o,d]);return i?null:(0,a.jsx)(g.Provider,{value:l,children:(0,a.jsxs)(u,{schedulingBranding:o,isBrandingLoading:i,children:[e,o?.customCSS&&(0,a.jsx)("style",{id:"custom-css",dangerouslySetInnerHTML:{__html:o.customCSS}})]})})},p=()=>{let e=(0,n.use)(g);if(!e)throw Error("useBrandingOptions must be used inside of a BookingProvider");return e.brandingOptions}},14693:(e,r,t)=>{t.d(r,{$M:()=>l,Kn:()=>u,UW:()=>i,de:()=>d});var a=t(95155),s=t(3673),n=t(12115);let o=(0,n.createContext)(void 0),i=({children:e,tenantId:r})=>{let t=(0,s.u)(),[i,d]=(0,n.useState)({tenantId:t.tenantId??r}),l=(0,n.useCallback)(({tenantId:e,workspaceId:r,hostId:t})=>{(i.tenantId!==e||r!==i.workspaceId||t!==i.hostId)&&d(a=>({...a,tenantId:e,workspaceId:r,hostId:t}))},[i]),u=(0,n.useMemo)(()=>({state:i,setIdentityInfoState:l}),[i,l]);return(0,a.jsx)(o.Provider,{value:u,children:e})},d=()=>{let e=(0,n.use)(o);if(!e)throw Error("useTenantId must be used inside of a IdentityProvider");return e.state.tenantId},l=()=>{let e=(0,n.use)(o);if(!e)throw Error("useIdentityInfoState must be used inside of a IdentityProvider");let{tenantId:r,workspaceId:t,hostId:a}=e.state;return(0,n.useMemo)(()=>({tenantId:r,workspaceId:t,hostId:a}),[a,r,t])},u=()=>{let e=(0,n.use)(o);if(!e)throw Error("useSetIdentityInfo must be used inside of a IdentityProvider");let{setIdentityInfoState:r,state:t}=e;return e=>{let a={...t,...e};(t.workspaceId!==a.workspaceId||t.tenantId!==a.tenantId)&&r(a)}}},27186:(e,r,t)=>{t.d(r,{F:()=>o});var a=t(95155);t(12115);var s=t(87890),n=t(74171);let o=({inModal:e})=>{let r=e?8:void 0;return(0,a.jsx)(s.az,{width:"100%",borderBottomLeftRadius:r,borderBottomRightRadius:r,bg:"bg/minor",children:(0,a.jsx)(n.J,{anchorLink:"https://www.chilipiper.com"})})}},32056:(e,r,t)=>{t.d(r,{EO:()=>c,TE:()=>l,YB:()=>h,cr:()=>g,jE:()=>d,si:()=>u});var a=t(62105),s=t(29159);let n="chili/ADDITIONAL_HEADERS",o="chili/GUEST_SESSION_V2",i="chili/TENANT_ID",d=e=>{if((e=>{try{return!!(0,s.s)(e).sub}catch(e){return console.error(e),!1}})(e))localStorage.setItem(o,e);else if(e)throw(0,a.l7)("session",e),Error("Session is not valid")},l=()=>localStorage.getItem(o)||void 0,u=e=>{localStorage.setItem(i,e)},c=()=>localStorage.getItem(i)||void 0,g=e=>{localStorage.setItem(n,JSON.stringify(e))},h=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):{}}},35771:(e,r,t)=>{t.d(r,{HC:()=>x,JS:()=>A,VB:()=>D,Xd:()=>q,Xj:()=>O,ae:()=>C,b$:()=>P,bE:()=>V,gb:()=>R,h2:()=>M,oE:()=>j,oy:()=>v,s2:()=>$,sf:()=>_,u1:()=>T,us:()=>E,xe:()=>B,yV:()=>k});var a=t(43417),s=t(84793),n=t(68080),o=t(48071),i=t(26182),d=t(66751),l=t(17675),u=t(38252),c=t(89191),g=t(76933),h=t(32196),p=t(79666),y=t(99059),f=t(85850),w=t(52946),b=t(46480),m=t(8501),I=t(57005),S=t(52541);let v=new a.Ay(S.D),E=new s.Ay(S.D),C=new n.Ay(S.D),A=new o.Ay(S.D),P=new d.Ay(S.D),x=new i.Ay(S.D),D=new g.Ay(S.D),k=new l.Ay(S.D),j=new u.V2(S.D),M=new c.V3(S.D),T=new h.V1(S.D),_=new p.V3(S.D),$=new f.Ay(S.D),O=new w.V3(S.D),V=new y.Ay(S.D),q=new b.Ay(S.D),R=new m.Ay(S.D),B=new I.Ay(S.D)},44966:(e,r,t)=>{t.d(r,{Vd:()=>a,l2:()=>n,xf:()=>o});let a=/^(\w+)[._-]?(\w+)?@([^]*?)\.(?!\w{1,1}$)\w{2,}$/g,s=/^[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,n=e=>e.startsWith("http")?e:`https://${e}`,o=e=>e&&s.test(e)},52541:(e,r,t)=>{t.d(r,{D:()=>v,W:()=>m});var a=t(45410),s=t(12115),n=t(57005),o=t(54670),i=t(93179),d=t(29159),l=t(7132),u=t(32056),c=t(9723),g=t(62105),h=t(87358);let p=new n.Ay().postAuthV1PublicGuestTokensPathGetter(),y=(e,r)=>({[l.XJ]:e,"x-caller-ref":`guest/${r}`,"x-request-id":(0,a.Ak)()}),f=(0,s.cache)(async(e,r,t,a)=>{let s=y(e,t),n=`${a?`https://${a}`:r}${p}`;try{let e=await fetch(n,{headers:s,method:"POST"});if((0,g.cx)({errorCode:e.status,headers:e.headers}),!e.ok){let r=await e.text();throw(0,g.cx)({responseText:r,statusText:e.statusText}),Error(`fire-auth request failed with status: ${e.status} and response text: ${r}`)}let r=await e.json();return(0,u.jE)(r),r}catch(e){throw(0,o.Cp)(e),e}}),w=(e,{init:r,input:t})=>{if(e.ok)return e;let a=new URL(t.toString()).pathname.split("/")[2];try{return e.text().then(s=>{throw c.A.error({errorMessage:s,errorCode:e.status,...r,input:t}),(0,g.cx)({errorMessage:s,errorCode:e.status,responseHeaders:e.headers,...r,input:t}),Error(`${a} request failed with status: ${e.status}`)})}catch{throw c.A.error({errorMessage:e.statusText,errorCode:e.status,...r,input:t}),(0,g.cx)({errorMessage:e.statusText,errorCode:e.status,responseHeaders:e.headers,...r,input:t}),Error(`${a} request failed with status: ${e.status}`)}},b=(0,a.Ak)(),m=e=>{try{if(e)return(0,d.s)(e).sub}catch(e){return c.A.error(e),b}},I=h.env.REACT_APP_REVERSE_PROXY||window?.location.origin;(0,i.A)(I,"API URL is not defined");let S=new URL(I),v={baseUrl:S.origin,customFetch:async(e,r={})=>{let t=(0,u.EO)(),a=(0,u.TE)(),s=(0,u.YB)(),n={...r.headers,...y(t,b),...s},o=e.toString().includes("public/");a||o||(a=await f(t,S.origin,b,r.headers?.host));let i=m(a);r.headers={...n,"x-caller-ref":`guest/${i??b}`,...o?{}:{authorization:`Bearer ${a}`}};let d=r.headers?.host?e.toString().replace(S.origin,`https://${r.headers?.host}`):e,l=c.A.child({...r,input:e,inputWithSubdomain:d});return l.info(`Calling ${d}`),fetch(d,r).then(async e=>{if(e.ok||l.error(`Request ${r.method}: ${d} failed with status: ${e.status}`),403===e.status){let e=await f(t,S.origin,b,r.headers?.host),a=m(e);return fetch(d,{...r,headers:{...r.headers,authorization:`Bearer ${e}`,"x-caller-ref":`guest/${a??b}`}}).then(e=>w(e,{init:r,input:d}))}return w(e,{init:r,input:d})})}}},54670:(e,r,t)=>{t.d(r,{Cp:()=>d,d7:()=>o,u$:()=>i});var a=t(70638),s=t(96314),n=t(87358);let o=e=>null!==e&&"object"==typeof e&&"errorCode"in e,i=e=>{if(o(e))try{let r=JSON.parse(e.errorMessage);return o(r),r}catch(r){return e}if(e instanceof Error)try{let r=JSON.parse(e.message);if(o(r)){if(r.errorMessage)return JSON.parse(r.errorMessage);return r}return{...e,errorCode:"error",errorMessage:e.message}}catch(r){return{...e,errorCode:"error",errorMessage:e.message}}return{...e,errorMessage:"",errorCode:"unknownError"}},d=e=>{let r=i(e);s.v4(e=>{e.setTag("appVersion",n.env.npm_package_version??(0,a.r)()),e.captureException(Error(r.errorMessage,{cause:r.errorCode}))})}},59540:(e,r,t)=>{t.d(r,{m:()=>s});let a="bg/page",s=({schedulingBranding:e,pathname:r})=>r.includes("/form")?e?.formScreen?.bgColor??a:r.includes("/booked")?e?.meetingConfirmationScreen?.bgColor??a:e?.calendarScreen?.bgColor??a},70638:(e,r,t)=>{t.d(r,{Q:()=>i,r:()=>o});var a=t(51171),s=t(87358);let n=e=>s.env[e],o=()=>n("VERSION")||(0,a.rE)(),i=()=>n("ASSET_PATH")||(0,a._W)("ASSET_PATH")},76876:(e,r,t)=>{t.d(r,{H5:()=>i,y2:()=>d,nz:()=>o});var a=t(12115),s=t(90934),n=t(44966);let o=({tenantId:e,workspaceId:r})=>{let{data:t,isLoading:a,isPending:n}=(0,s.OC)({tenantId:e,workspaceId:r});return{data:(e=>e?.style?.type==="CustomStyle"?{...e.style.values,displayCPbranding:e.displayCPbranding,logo:e?.logo,customCSS:e.style.customCSS}:{displayCPbranding:e?.displayCPbranding??!1,logo:e?.logo})(t),isLoading:a,isPending:n}},i=(e,r)=>{let t=e?e.replace(/\s/g,"+"):"",s=(0,a.useMemo)(()=>(0,n.xf)(t),[t]);if(e)return s?{type:"External",email:t,timezone:r}:{type:"CrmId",id:e,timezone:r}},d=(e,r)=>{let{data:t,isLoading:a}=(0,s.iP)({tenantId:e,usersIds:r});return{userDetails:r?.length&&t?r.map(e=>t.find(r=>r.id===e)).filter(e=>void 0!==e):t,isLoadingUserDetails:a}}},83750:(e,r,t)=>{t.d(r,{Er:()=>n,HE:()=>s,Hc:()=>i,MD:()=>l,aS:()=>d,findPersonalDetails:()=>o});var a=t(35771);let s=(e,r)=>a.Xj.guestGetWorkspaceAppliedStylingV3(e,r,{cache:"force-cache"}).catch(()=>({displayCPbranding:!1,style:{type:"UseDefault"}})),n=async(e,r)=>a.s2.publicGetPersonal(e,r,{cache:"force-cache"}),o=(e,r)=>a.Xj.guestFindPersonalDetailsV3(e,r,{cache:"force-cache"}),i=(e,r)=>a.Xj.guestGetPictureOfUserV3(e,r,{cache:"force-cache"}),d=(e,r)=>a.Xj.guestFindPersonalDetailsOfListOfUsersV3(e,{id:r},{cache:"force-cache"}),l=(e,r)=>a.Xj.guestGetPersonalPageV3(e,r,{cache:"force-cache"})},90934:(e,r,t)=>{t.d(r,{FU:()=>u,Gj:()=>d,OC:()=>i,iP:()=>g,lo:()=>l,z2:()=>c});var a=t(83750),s=t(81717),n=t(52020),o=t(28755);let i=e=>(0,o.I)((({tenantId:e,workspaceId:r})=>(0,s.j)({queryKey:[e,r,"workspace/public-get-workspace-applied-branding"],queryFn:e&&r?()=>(0,a.HE)(e,r):n.hT,retry:0}))(e)),d=e=>(0,o.I)((({tenantId:e,userId:r})=>(0,s.j)({queryKey:[e,r,"workspace/personal-details"],queryFn:e&&r?()=>(0,a.findPersonalDetails)(e,r).then(t=>({...t,tenantId:e,userId:r})):n.hT,enabled:!!(e&&r)}))(e)),l=e=>(0,o.I)((({tenantId:e,userId:r})=>(0,s.j)({queryKey:[e,r,"user-profile-image"],queryFn:e&&r?()=>(0,a.Hc)(e,r).then(({url:e})=>e):n.hT,enabled:!!(e&&r),retry:0}))(e)),u=e=>(0,o.I)((({tenantId:e,userId:r})=>(0,s.j)({queryKey:[e,r,"workspace/get-personal-workspace-id"],queryFn:e&&r?()=>(0,a.Er)(e,r):n.hT,enabled:!!(e&&r)}))(e)),c=e=>(0,o.I)((({tenantId:e,userId:r})=>(0,s.j)({queryKey:[e,r,"workspace/get-personal-page"],queryFn:e&&r?()=>(0,a.MD)(e,r):n.hT,enabled:!!(e&&r)}))(e)),g=e=>(0,o.I)((({tenantId:e,usersIds:r})=>(0,s.j)({queryKey:[e,r,"workspace/find-personal-details"],queryFn:e&&r?.length?()=>(0,a.aS)(e,r).then(e=>Object.keys(e).map(r=>({id:r,...e[r]}))):n.hT,enabled:!!(e&&r)}))(e))}}]);