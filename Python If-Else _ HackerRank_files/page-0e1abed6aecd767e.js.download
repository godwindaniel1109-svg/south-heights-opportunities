try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a99ce24b-da51-4156-8e33-b3bb7bb20923",e._sentryDebugIdIdentifier="sentry-dbid-a99ce24b-da51-4156-8e33-b3bb7bb20923")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:scheduling-links":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9979],{38596:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});let n=e=>{let{routerSlug:t,attendees:r,trigger:n,tenantId:s="",sourceUrl:a,timezone:d,meetingTypeId:i,by:o,concierge:l,guestTimezone:u,closeOnOutside:f,event:g,accountId:E,objectId:b,campaignId:c,status:I,assigneeCrmId:p,caseId:_,opportunityId:y,disableRelation:m,domElement:w,routingId:R,router:h,locale:M,dynamicRedirectLink:k,...C}=e;return Object.keys(C).reduce((e,t)=>(!t.startsWith("event_")&&C[t]&&(e[t]=C[t]),e),{})}},72063:(e,t,r)=>{Promise.resolve().then(r.bind(r,83814))},83814:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(95155),s=r(12115),a=r(99177),d=r(35695),i=r(69567),o=r(89443),l=r(14693),u=r(64553),f=r(3673),g=r(38596),E=r(54583),b=r(28539),c=r(7132),I=r(78226);let p=()=>{let e=(0,l.de)(),t=(0,d.useParams)(),r=(0,f.u)(),[p,_]=(0,s.useState)(),{timezone:y}=(0,o.BF)(),{data:m}=(0,u._t)({tenantId:e,routerSlug:t.routerSlug}),{routingId:w,enrichedFields:R}=(({fields:e,tenantId:t,triggerType:r,spamCheckEnabled:n})=>{let[a,o]=(0,s.useState)(""),[l,f]=(0,s.useState)(!1),g=(0,d.useParams)(),{data:E,isLoading:b,isError:I}=(0,u.f6)({tenantId:t,routerSlug:g.routerSlug,email:a,triggerType:r}),p=(0,s.useMemo)(()=>e.filter(e=>e.waterfallId),[e]),_=(0,s.useMemo)(()=>p.reduce((e,t)=>(E?.enrichmentResponse?.fields[t.dataFieldRef]&&E.enrichmentResponse.values[t.dataFieldRef]&&(e[t.name]=E.enrichmentResponse.values[t.dataFieldRef]),e),{}),[E,p]);return(0,s.useEffect)(()=>{let e=e=>{let{data:t}=e;"string"!=typeof t&&["ENRICH_CONCIERGE_FORM_DATA","PERFORM_PRELAUNCH"].includes(t.type)&&t.data&&(f(!1),o(t.data))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[g,o]),(0,s.useEffect)(()=>{if(e.length||n){let t=e.find(e=>e.dataFieldRef===c.gk)?.name,r=p.map(e=>e.name);(0,i.BI)("INIT_PRELAUNCH",{fieldsToEnrich:r,emailField:t}),(0,i.BI)("HIDE_ENRICHMENT_FIELDS",{fieldsToEnrich:r,emailField:t})}},[p]),!l&&(I||!b&&E)&&((0,i.BI)("PRELAUNCH_SUCCEEDED",{enrichedFields:_,routingId:E?.routingId}),(0,i.BI)("ENRICHMENT_SUCCEEDED",{enrichedFields:_,routingId:E?.routingId}),f(!0)),{routingId:E?.routingId,enrichedFields:_}})({fields:(0,s.useMemo)(()=>m?.acceptsRouting?(0,b.r)(m.formMapping,"ThirdPartyForm"):[],[m]),spamCheckEnabled:m?.spamCheckEnabled,tenantId:e,triggerType:r.trigger||"ThirdPartyForm"}),{launchRouting:h,error:M,isPending:k}=(0,I.V)({trigger:r.trigger}),C=(0,s.useMemo)(()=>({...p,...t,...r,guestTimezone:y}),[p,t,r,y]),T=(0,l.Kn)();if((0,s.useEffect)(()=>{m?.workspaceId&&T({workspaceId:m.workspaceId})},[m?.workspaceId]),(0,s.useEffect)(()=>{k||(0,i.BI)("STARTED_LISTENING_FORM_DATA_UPDATE")},[k]),(0,s.useEffect)(()=>{let e=e=>{let{data:t}=e;if("string"!=typeof t&&"UPDATE_CONCIERGE_FORM_DATA"===t.type){let e=Object.fromEntries(new URLSearchParams(t.data));if(0===Object.keys((0,g.b)(e)).length)return void(0,i.BI)("ERROR",{response:"No form data was sent"});_(e)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),Object.keys((0,s.useMemo)(()=>(0,g.b)(C),[C])).length>0&&!M&&!k){let e={...C};w&&(e.routingId=w,Object.keys(R).forEach(t=>{delete e[t]})),h(e)}return M?(0,n.jsx)(E.default,{error:M}):(0,n.jsx)(a.ChiliLoadingPage,{bg:"transparent"})}}},e=>{e.O(0,[4585,4140,6642,2136,508,6766,7778,5513,4273,8140,850,720,6712,3728,8441,3165,7358],()=>e(e.s=72063)),_N_E=e.O()}]);