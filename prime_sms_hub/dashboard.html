<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Prime SMS Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body class="dashboard-body">
    <!-- Main Container -->
    <div class="dashboard-container">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="images/godwin.jpg" alt="Prime SMS Hub Logo" class="sidebar-logo" height="50" width="50">
                <h2>PRIME SMS HUB</h2>
            </div>

            <!-- User Profile Summary -->
            <div class="user-profile-summary">
                <img src="images/neil.jpg" alt="User" class="user-avatar" id="userAvatar" width="50" height="50">
                <div class="user-info">
                    <strong id="userNameDisplay">Loading...</strong>
                    <p class="user-balance">Balance: <span id="userBalance">₦0.00</span></p>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard-home">
                    <i class="fas fa-home"></i> <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-section="buy-number">
                    <i class="fas fa-sim-card"></i> <span>Buy Number</span>
                </a>
                <a href="#" class="nav-item" data-section="order-history">
                    <i class="fas fa-history"></i> <span>Order History</span>
                </a>
                <a href="#" class="nav-item" data-section="wallet">
                    <i class="fas fa-wallet"></i> <span>Wallet</span>
                </a>
                <a href="#" class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i> <span>Settings</span>
                </a>
                <!-- NEW: Support Link -->
                <a href="#" class="nav-item" data-section="support">
                    <i class="fas fa-headset"></i> <span>Support</span>
                </a>
                <!-- Admin Link - Only shows if user is admin -->
                <a href="#" class="nav-item admin-only" data-section="admin-panel" style="display: none;">
                    <i class="fas fa-shield-alt"></i> <span>Admin Panel</span>
                </a>
                <a href="#" class="nav-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> <span>Logout</span>
                </a>
            </nav>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="main-content">
            <!-- Top Header Bar -->
            <header class="top-header">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <button class="btn-notification">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                </div>
            </header>

            <!-- Dynamic Content Sections -->
            <section id="content-sections">

                <!-- Section 1: Dashboard Home -->
                <div class="content-section active-section" id="dashboard-home">
                    <h2>Welcome Back, <span id="welcomeName">User</span>!</h2>
                    <div class="quick-stats">
                        <div class="stat-card">
                            <h3>Available Balance</h3>
                            <p class="stat-number" id="quickBalance">₦0.00</p>
                            <a href="#" class="stat-link" data-section="wallet">Add Funds</a>
                        </div>
                        <div class="stat-card">
                            <h3>Today's Orders</h3>
                            <p class="stat-number">0</p>
                            <a href="#" class="stat-link" data-section="order-history">View All</a>
                        </div>
                        <div class="stat-card">
                            <h3>Active Services</h3>
                            <p class="stat-number">5</p>
                            <a href="#" class="stat-link" data-section="buy-number">Buy Number</a>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Buy Number Form - FIXED STRUCTURE -->
                <div class="content-section" id="buy-number">
                    <h2>Buy a New Number</h2>
                    <p>Select a service and country to purchase a virtual number for verification.</p>

                    <div class="buy-number-form" id="buyNumberForm">
                        <h3>Order Details</h3>

                        <!-- Country Select - FIXED: No nested select -->
                        <div class="form-group">
                            <label for="orderCountry"><i class="fas fa-globe"></i> Select Country</label>
                            <select id="orderCountry" name="country" class="form-select" required>
                                <option value="">-- Choose Country --</option>
                                <option value="afghanistan">Afghanistan</option>
                                <option value="albania">Albania</option>
                                <option value="algeria">Algeria</option>
                                <option value="argentina">Argentina</option>
                                <option value="australia">Australia</option>
                                <option value="austria">Austria</option>
                                <option value="bangladesh">Bangladesh</option>
                                <option value="belgium">Belgium</option>
                                <option value="brazil">Brazil</option>
                                <option value="canada">Canada</option>
                                <option value="china">China</option>
                                <option value="colombia">Colombia</option>
                                <option value="cuba">Cuba</option>
                                <option value="czech republic">Czech Republic</option>
                                <option value="denmark">Denmark</option>
                                <option value="egypt">Egypt</option>
                                <option value="ethiopia">Ethiopia</option>
                                <option value="finland">Finland</option>
                                <option value="france">France</option>
                                <option value="germany">Germany</option>
                                <option value="ghana">Ghana</option>
                                <option value="greece">Greece</option>
                                <option value="india">India</option>
                                <option value="indonesia">Indonesia</option>
                                <option value="iran">Iran</option>
                                <option value="ireland">Ireland</option>
                                <option value="israel">Israel</option>
                                <option value="italy">Italy</option>
                                <option value="japan">Japan</option>
                                <option value="kenya">Kenya</option>
                                <option value="malaysia">Malaysia</option>
                                <option value="mexico">Mexico</option>
                                <option value="morocco">Morocco</option>
                                <option value="netherlands">Netherlands</option>
                                <option value="new zealand">New Zealand</option>
                                <option value="nigeria">Nigeria</option>
                                <option value="norway">Norway</option>
                                <option value="pakistan">Pakistan</option>
                                <option value="peru">Peru</option>
                                <option value="philippines">Philippines</option>
                                <option value="poland">Poland</option>
                                <option value="portugal">Portugal</option>
                                <option value="romania">Romania</option>
                                <option value="russia">Russia</option>
                                <option value="saudi arabia">Saudi Arabia</option>
                                <option value="singapore">Singapore</option>
                                <option value="south africa">South Africa</option>
                                <option value="south korea">South Korea</option>
                                <option value="spain">Spain</option>
                                <option value="sweden">Sweden</option>
                                <option value="switzerland">Switzerland</option>
                                <option value="thailand">Thailand</option>
                                <option value="turkey">Turkey</option>
                                <option value="ukraine">Ukraine</option>
                                <option value="united kingdom">United Kingdom</option>
                                <option value="uruguay">Uruguay</option>
                                <option value="usa">United States</option>
                                <option value="venezuela">Venezuela</option>
                                <option value="vietnam">Vietnam</option>
                            </select>
                        </div>

                        <!-- Service/App Select - FIXED: No nested select -->
                        <div class="form-group">
                            <label for="orderService"><i class="fas fa-mobile-alt"></i> Select Service</label>
                            <select id="orderService" name="service" class="form-select" required>
                                <option value="">-- Choose Service --</option>
                                <option value="airbnb">Airbnb</option>
                                <option value="amazon">Amazon</option>
                                <option value="aol">AOL</option>
                                <option value="binance">Binance</option>
                                <option value="badoo">Badoo</option>
                                <option value="blizzard">Blizzard / Battle.net</option>
                                <option value="burger king">Burger King App</option>
                                <option value="cashapp">Cash App</option>
                                <option value="chime">Chime</option>
                                <option value="clubhouse">Clubhouse</option>
                                <option value="discord">Discord</option>
                                <option value="doordash">DoorDash</option>
                                <option value="ebay">eBay</option>
                                <option value="epic games">Epic Games</option>
                                <option value="facebook">Facebook</option>
                                <option value="fiverr">Fiverr</option>
                                <option value="github">GitHub</option>
                                <option value="google">Google</option>
                                <option value="grab">Grab</option>
                                <option value="hily">Hily</option>
                                <option value="hulu">Hulu</option>
                                <option value="instagram">Instagram</option>
                                <option value="instacart">Instacart</option>
                                <option value="kakaoTalk">KakaoTalk</option>
                                <option value="line">LINE</option>
                                <option value="linkedin">LinkedIn</option>
                                <option value="lyft">Lyft</option>
                                <option value="mcdonalds">McDonald's App</option>
                                <option value="microsoft">Microsoft</option>
                                <option value="netflix">Netflix</option>
                                <option value="nike">Nike App</option>
                                <option value="notion">Notion</option>
                                <option value="openai">OpenAI (ChatGPT/API)</option>
                                <option value="paypal">PayPal</option>
                                <option value="pinterest">Pinterest</option>
                                <option value="playstation">PlayStation Network (PSN)</option>
                                <option value="protonmail">ProtonMail</option>
                                <option value="rakuten">Rakuten</option>
                                <option value="skype">Skype</option>
                                <option value="snapchat">Snapchat</option>
                                <option value="steam">Steam</option>
                                <option value="stripe">Stripe</option>
                                <option value="telegram">Telegram</option>
                                <option value="tiktok">TikTok</option>
                                <option value="tinder">Tinder</option>
                                <option value="twitter">Twitter</option>
                                <option value="uber">Uber</option>
                                <option value="venmo">Venmo</option>
                                <option value="whatsapp">WhatsApp</option>
                                <option value="yahoo">Yahoo</option>
                                <option value="zelle">Zelle</option>
                                <option value="zoom">Zoom</option>
                            </select>
                        </div>

                        <!-- Cost Display -->
                        <div class="cost-display">
                            <p>Estimated Cost: <strong id="estimatedCost">₦ 150.00</strong></p>
                            <p>Your Balance: <span id="currentBalanceDisplay">₦ 0.00</span></p>
                        </div>

                        <!-- Submit Button -->
                        <button type="button" class="btn-buy-now" id="submitOrderBtn">
                            <i class="fas fa-shopping-cart"></i> Buy Number Now
                        </button>

                        <p class="form-note"><i class="fas fa-info-circle"></i> Number will be delivered to your
                            dashboard within minutes.</p>
                    </div>
                </div>

                <!-- Section 3: Order History -->
                <div class="content-section" id="order-history">
                    <h2>Order History</h2>
                    <div class="table-container">
                        <table class="orders-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Service</th>
                                    <th>Country</th>
                                    <th>Number</th>
                                    <th>Code</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTableBody">
                                <tr>
                                    <td colspan="6">Loading your orders...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section 4: Wallet -->
                <div class="content-section" id="wallet">
                    <h2>Wallet & Funding</h2>
                    <div class="wallet-layout">
                        <!-- Balance Card -->
                        <div class="balance-card">
                            <h3>Current Balance</h3>
                            <p class="balance-amount" id="walletBalance">₦0.00</p>
                        </div>

                        <!-- Funding Options -->
                        <div class="funding-options">
                            <h3>Add Funds</h3>
                            <div class="option automatic">
                                <h4><i class="fas fa-bolt"></i> Automatic (Paystack)</h4>
                                <p>Instant funding with card or bank transfer.</p>
                                <input type="number" placeholder="Enter amount (₦)" id="autoAmount" min="100">
                                <button class="btn-fund" id="paystackBtn">Pay with Paystack</button>
                            </div>
                            <div class="option manual">
                                <h4><i class="fas fa-hand-holding-usd"></i> Manual Transfer</h4>
                                <p>Transfer to our bank account and upload proof.</p>
                                <p><strong>Account Details:</strong><br>
                                    OPay - 7048694977<br>
                                    Godwin Ugbedeojo Daniel</p>
                                <input type="file" id="proofUpload" accept="image/*">
                                <button class="btn-fund" id="manualSubmitBtn">Submit Proof</button>
                            </div>
                        </div>

                        <!-- Transaction History -->
                        <div class="transaction-history">
                            <h3>Recent Transactions</h3>
                            <ul id="transactionList">
                                <li>No transactions yet.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Section 5: Settings -->
                <div class="content-section" id="settings">
                    <h2>Account Settings</h2>
                    <div class="settings-grid">
                        <div class="setting-card">
                            <h3><i class="fas fa-user"></i> Profile</h3>
                            <div class="avatar-upload">
                                <img src="images/avatars/default-avatar.jpg" alt="Avatar" id="settingsAvatar">
                                <input type="file" id="avatarUpload" accept="image/*">
                                <label for="avatarUpload">Change Picture</label>
                            </div>
                            <input type="text" id="displayName" placeholder="Your Name">
                            <button class="btn-save" id="saveProfileBtn">Save Profile</button>
                        </div>
                        <div class="setting-card">
                            <h3><i class="fas fa-shield-alt"></i> Security</h3>
                            <p>Change Password (coming soon)</p>
                        </div>
                    </div>
                </div>

                <!-- Section 6: Support -->
                <div class="content-section" id="support">
                    <h2><i class="fas fa-headset"></i> Support</h2>
                    <div class="support-container">
                        <div class="support-option">
                            <h3><i class="fas fa-envelope"></i> Email Support</h3>
                            <p>For detailed issues, contact us at:</p>
                            <p class="contact-info">primesmshub50@gmail.com</p>
                        </div>
                        <div class="support-option">
                            <h3><i class="fas fa-phone"></i> Phone Support</h3>
                            <p>WhatsApp us at:</p>
                            <p class="contact-info">+234 9155359202</p>
                        </div>
                        <div class="support-option">
                            <h3><i class="fab fa-telegram"></i> Telegram Support</h3>
                            <p>Join our support group for quick help:</p>
                            <a href="https://t.me/Primesmshub" target="_blank" class="telegram-link">
                                <i class="fab fa-telegram"></i> t.me/Primesmshub
                            </a>
                        </div>
                        <div>
                            <div>
                                <h3>Follow us on</h3>
                                <a href="https://www.tiktok.com/@realdwin" class="social-link">
                                    <i class="fab fa-tiktok"></i> TikTok
                                </a><br>

                                <a href="https://www.instagram.com/realdwin5" class="social-link">
                                    <i class="fab fa-instagram"></i> Instagram
                                </a><br>

                                <a href="https://www.facebook.com/Godwin Ugbedeojo" class="social-link">
                                    <i class="fab fa-facebook"></i> Facebook
                                </a><br>

                                <a href="https://twitter.com/realdwin5" class="social-link">
                                    <i class="fab fa-twitter"></i> Twitter
                                </a><br>

                                <a href="https://www.snapchat.com/add/realdwin5" class="social-link">
                                    <i class="fab fa-snapchat"></i> Snapchat
                                </a><br>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 7: Admin Panel (Hidden by default) -->
                <div class="content-section" id="admin-panel">
                    <h2><i class="fas fa-shield-alt"></i> Admin Panel</h2>
                    <p>This section is for administrators only.</p>
                    <!-- Admin features will be added here later -->
                </div>

            </section>
        </main>
    </div>

    <!-- Add this before your existing scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script>
        // Same config as login.html
        const firebaseConfig = {
            apiKey: "AIzaSyCIK3C5qAOUZUtUixX1knFRSkXAYXOCDaA",
            authDomain: "primesmshub-c0f58.firebasestorage.app",
            projectId: "primesmshub-c0f58",
            storageBucket: "primesmshub-c0f58.firebasestorage.app",
            messagingSenderId: "40273399506",
            appId: "1:40273399506:web:349a116c082d830987a70b",
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();

        // Protect dashboard - redirect if not logged in
        auth.onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'login.html';
            } else {
                // Update user info
                document.getElementById('userNameDisplay').textContent = user.displayName || user.email;
                document.getElementById('welcomeName').textContent = user.displayName || user.email;
            }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', (e) => {
            e.preventDefault();
            auth.signOut().then(() => {
                window.location.href = 'login.html';
            });
        });
    </script>

    <!-- JavaScript Files -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>

    <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
    // SAME CONFIG AS login.html
    const firebaseConfig = {
        apiKey: "YOUR_API_KEY_HERE", // ← MUST BE SAME AS LOGIN PAGE
        authDomain: "your-project.firebaseapp.com",
        projectId: "your-project",
        storageBucket: "your-project.appspot.com",
        messagingSenderId: "1234567890",
        appId: "1:1234567890:web:abcdef123456"
    };

    // Initialize
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const auth = firebase.auth();
    const db = firebase.firestore();

    // PROTECT DASHBOARD - Check if user is logged in
    auth.onAuthStateChanged((user) => {
        if (!user) {
            // No user, redirect to login
            window.location.href = 'login.html';
        } else {
            // User is logged in, update UI
            document.getElementById('userNameDisplay').textContent = user.displayName || user.email;
            document.getElementById('welcomeName').textContent = user.displayName || user.email;
            
            // Fetch user data from Firestore
            db.collection('users').doc(user.uid).get().then((doc) => {
                if (doc.exists) {
                    const userData = doc.data();
                    // Update balance if available
                    if (userData.balance !== undefined) {
                        document.getElementById('userBalance').textContent = '₦' + userData.balance.toFixed(2);
                        document.getElementById('quickBalance').textContent = '₦' + userData.balance.toFixed(2);
                        document.getElementById('walletBalance').textContent = '₦' + userData.balance.toFixed(2);
                    }
                }
            });
        }
    });

    // Logout functionality
    document.getElementById('logoutBtn').addEventListener('click', (e) => {
        e.preventDefault();
        auth.signOut().then(() => {
            window.location.href = 'login.html';
        }).catch((error) => {
            console.error('Logout error:', error);
            alert('Logout failed: ' + error.message);
        });
    });

    // Dashboard navigation (keep your existing dashboard.js functionality)
    document.addEventListener('DOMContentLoaded', function() {
        // Your existing dashboard.js code here
        console.log('Dashboard loaded for logged in user');
    });
</script>
</body>

</html>